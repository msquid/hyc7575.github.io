<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Node.js(express) - body-parser와 multer | hyc7575 blog</title><link rel="stylesheet" href="/libs/noto-sans-kr/styles.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/libs/normalize.min.css"><link rel="stylesheet" href="/libs/font-awesome-4.6.3/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="http://hyc7575.github.io/2017/05/24/2017-05-24-node-js-bodyparserAndMulter/"/>
<meta name="description" content="Node.js에서 form양식을 submit을 하기위해 사용되는 body-parser와 multer 미들웨어에 대해서 간단하게 알아보려 합니다. 각 미들웨어의 용도를 짧게 소개하면 body-parser는 라우터와 미들웨어 예제때 언급하였듯 요청 바디를 파싱하여서 req.body 객체로 접근할 수 있도록 도와주고, multer는 파일을 업로드를 도와주는 미들">
<meta name="keywords" content="nodejs,javascript,javascript server,server,express,body-parser,bodyParser,multer,form submit">
<meta property="og:type" content="article">
<meta property="og:title" content="Node.js(express) - body-parser와 multer">
<meta property="og:url" content="http://hyc7575.github.io/2017/05/24/2017-05-24-node-js-bodyparserAndMulter/index.html">
<meta property="og:site_name" content="hyc7575 blog">
<meta property="og:description" content="Node.js에서 form양식을 submit을 하기위해 사용되는 body-parser와 multer 미들웨어에 대해서 간단하게 알아보려 합니다. 각 미들웨어의 용도를 짧게 소개하면 body-parser는 라우터와 미들웨어 예제때 언급하였듯 요청 바디를 파싱하여서 req.body 객체로 접근할 수 있도록 도와주고, multer는 파일을 업로드를 도와주는 미들">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png">
<meta property="og:updated_time" content="2017-11-26T11:33:07.552Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Node.js(express) - body-parser와 multer">
<meta name="twitter:description" content="Node.js에서 form양식을 submit을 하기위해 사용되는 body-parser와 multer 미들웨어에 대해서 간단하게 알아보려 합니다. 각 미들웨어의 용도를 짧게 소개하면 body-parser는 라우터와 미들웨어 예제때 언급하였듯 요청 바디를 파싱하여서 req.body 객체로 접근할 수 있도록 도와주고, multer는 파일을 업로드를 도와주는 미들">
<meta name="twitter:image" content="https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png"><meta property="article:author" content="keunhyeok jeon"><link rel="icon" href="/images/logo.png"><link rel="alternative" href="/atom.xml" type="application/atom+xml" title="hyc7575 blog"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-100392288-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope itemtype="https://schema.org/WebPage"><nav id="menu" class="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a href="/" title="Home" rel="home" class="menu__item__link menu__item__link--brand"><img src="/images/logo.png" alt="hyc7575 blog" class="menu__item__link--brand__image"><span class="menu__item__link--brand__label">hyc7575 blog</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a href="/" class="menu__item__link">Home</a></div><div class="menu__item"><a href="/about" class="menu__item__link">About</a></div><div class="menu__item"><a href="/archives" class="menu__item__link">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-outer"><div itemscope itemtype="https://schema.org/Blog" class="content-inner"><article id="article" itemscope itemtype="https://schema.org/BlogPosting" class="article"><h1 itemprop="headline" class="article__title">Node.js(express) - body-parser와 multer</h1><div class="article__meta"><time datetime="2017-05-24T05:31:33.000Z" itemprop="datePublished" class="article__meta__time">2017-05-24 14:31:33</time><div class="article__meta__categories"><a href="/categories/Node-js/" class="article__meta__categories__item">Node.js</a></div></div><div class="article__contents"><img src="https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png"/><p>Node.js에서 form양식을 submit을 하기위해 사용되는 <a href="https://github.com/expressjs/body-parser" target="_blank" rel="external">body-parser</a>와 <a href="https://github.com/expressjs/multer" target="_blank" rel="external">multer</a> 미들웨어에 대해서 간단하게 알아보려 합니다. 각 미들웨어의 용도를 짧게 소개하면 <code>body-parser</code>는 <a href="https://hyc7575.github.io/2017/05/16/2017-05-16-nodejs-express-router-middleware/">라우터와 미들웨어</a> 예제때 언급하였듯 요청 바디를 파싱하여서 req.body 객체로 접근할 수 있도록 도와주고, <code>multer</code>는 파일을 업로드를 도와주는 미들웨어 입니다.</p>
<h2 id="Directory"><a href="#Directory" class="headerlink" title="Directory"></a>Directory</h2><ul>
<li>project<ul>
<li>uploads</li>
<li>views<ul>
<li>form.ejs</li>
</ul>
</li>
<li>app.js</li>
<li>package.json</li>
</ul>
</li>
</ul>
<p>uploads폴더는 업로드한 파일들이 들어가는 폴더입니다.</p>
<h2 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">npm init</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">npm i --save body-parser multer express ejs</div></pre></td></tr></table></figure>
<h2 id="예제"><a href="#예제" class="headerlink" title="예제"></a>예제</h2><p>body-parser부터 차근차근 진행하도록 하겠습니다.</p>
<ul>
<li>form.ejs<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"ko"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">        *&#123;margin:0; padding: 0;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/userForm"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"userName"</span>&gt;</span>이름<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"userName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userName"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"userAge"</span>&gt;</span>나이<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"userAge"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userAge"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"userJob"</span>&gt;</span>직업<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"userJob"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userJob"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"전송"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>/userForm</code> 포인트로 post요청을 보내는 form을 생성합니다.</p>
<ul>
<li>app.js<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">const</span> app = express();</div><div class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</div><div class="line">　</div><div class="line">app.set(<span class="string">'views'</span>, __dirname + <span class="string">'/views'</span>);</div><div class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</div><div class="line">　</div><div class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">false</span>&#125;));</div><div class="line">app.use(bodyParser.json()); <span class="comment">// 이번예제에서는 사용되지 않습니다...</span></div><div class="line">　</div><div class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</div><div class="line">    res.render(<span class="string">'form'</span>);</div><div class="line">&#125;);</div><div class="line">app.post(<span class="string">'/userForm'</span>, (req, res) =&gt; &#123;</div><div class="line">    <span class="built_in">console</span>.log(req.body);</div><div class="line">    res.json(req.body);</div><div class="line">&#125;);</div><div class="line">　</div><div class="line">app.listen(<span class="number">3000</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>/userForm</code>으로 post요청이 들어오게되면 req.body객체를 웹페이지에 json형태로 뿌려주도록 하였습니다. 이 상태로 어플리케이션을 실행하여 테스트 해봅니다.</p>
<p><code>{&quot;userName&quot;: &quot;hyeok&quot;, &quot;userAge&quot;: &quot;20&quot;, &quot;userJob&quot;: &quot;Front-end developer&quot;}</code> 아마 이러한 형태의 결과를 보실 수 있으시라 생각합니다. 이전 포스팅에서 언급하였듯 form submit이 발생시 기본적으로 Content-Type이 x-www-form-urlencoded로 요청이 들어오는데 이 경우 <code>bodyParser.urlencoded()</code>가 input의 name과 매칭된 req.body 객체를 생성해줍니다. 이제 파일 업로드를 추가해보도록 하겠습니다.</p>
<ul>
<li>form.ejs<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/userForm"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"userImage"</span>&gt;</span>사진<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"userImage"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"userImage"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>input file이 들어간 로우 하나를 테이블에 추가하고, form태그의 enctype을 multipart/form-data로 명시해줍니다. 인코딩 타입을 이렇게 지정해야지만 form태그로 file전송을 할 수 있습니다.</p>
<ul>
<li>app.js<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">const</span> app = express();</div><div class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>); <span class="comment">// 이 예제에서는 bodyParser가 필요하지 않지만...</span></div><div class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">'multer'</span>);</div><div class="line"><span class="keyword">const</span> upload = multer(&#123;<span class="attr">dest</span>: <span class="string">'uploads/'</span>&#125;); <span class="comment">// uploads 폴더에 파일을 저장</span></div><div class="line">　</div><div class="line">app.set(<span class="string">'views'</span>, __dirname + <span class="string">'/views'</span>);</div><div class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</div><div class="line">　</div><div class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">false</span>&#125;)); <span class="comment">// 이번예제에서는 사용되지 않지만...</span></div><div class="line">app.use(bodyParser.json()); <span class="comment">// 이번예제에서는 사용되지 않지만...</span></div><div class="line">　</div><div class="line">app.use(express.static(<span class="string">'uploads'</span>)); <span class="comment">// 업로드된 이미지를 요청하여 표시한다면 넣어줍시다.</span></div><div class="line">　</div><div class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</div><div class="line">    res.render(<span class="string">'form'</span>);</div><div class="line">&#125;);</div><div class="line">app.post(<span class="string">'/userForm'</span>, upload.single(<span class="string">'userImage'</span>), (req, res) =&gt; &#123;</div><div class="line">    <span class="built_in">console</span>.log(req.body);</div><div class="line">    <span class="built_in">console</span>.log(req.file);</div><div class="line">    res.send(<span class="string">`</span></div><div class="line">        body: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(req.body)&#125;</span>,&lt;br/&gt;</div><div class="line">        file: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(req.file)&#125;</span></div><div class="line">    `);</div><div class="line">&#125;);</div><div class="line">　</div><div class="line">app.listen(<span class="number">3000</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>multer({dest: &#39;uploads/&#39;});</code> 이 함수는 미들웨어를 리턴하며, 옵션으로 들어간 dest의 value인 uploads에(폴더) 파일을 저장하겠다고 설정한 것 입니다. 그리고 리턴된 이 미들웨어는 <code>/userForm</code>에 post요청이 왔을 때 인자로 전해지는 <code>upload.single(&#39;userImage&#39;)</code> 미들웨어( 인자는 input file의 name값 )로 사용됩니다. 이 단계에서 req.body와 req.file에 접근 가능하도록 도와줍니다.( Content-Type이 multipart/form-data여서 body-parser가 해주지 않아요 ) 이제 어플리케이션을 실행하고 테스트를 진행합니다.</p>
<p>body와 file의 정보가 객체형태로 넘어오고 uploads폴더에 파일이 저장되는것을 볼 수 있지만 이름이 랜덤하고 확장자도 없이 들어오고 있습니다. <code>storage</code>라는 것을 사용하여 파일이 디스크에 저장될때를 컨트롤할 수 있다고 하니 사용해보도록 합시다.</p>
<ul>
<li>app.js<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">'multer'</span>);</div><div class="line"><span class="keyword">const</span> storage = multer.diskStorage(&#123;</div><div class="line">    <span class="attr">destination</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</div><div class="line">        cb(<span class="literal">null</span>, <span class="string">'uploads/'</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">filename</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</div><div class="line">        cb(<span class="literal">null</span>, <span class="built_in">Date</span>.now() + <span class="string">'_'</span> + file.originalname);</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line"><span class="keyword">const</span> upload = multer(&#123;<span class="attr">storage</span>: storage&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>큰 변화는 없고 multer의 인자로 dest대신 storage를 설정해줍니다. destination은 파일이 저장될 위치이고, filename은 저장되는 파일의 이름을 설정합니다. 임시방편으로 Date.now()를 사용하였지만 유니크한 값을 만들어주는 모듈들을 설치하여서 사용하는 것을 추천 드립니다. 다시 한번 저장 후 어플리케이션을 실행하면 원본이름을 포함하고 있는 파일이 저장되어 있는 것을 볼 수 있습니다.</p>
<h2 id="맺음"><a href="#맺음" class="headerlink" title="맺음"></a>맺음</h2><p>예제에서는 upload.single()을 사용하여 하나의 파일만을 업로드하는 경우를 살펴보았지만, upload.array()나 upload.fields() 등 을 사용하면 여러 파일을 업로드할 수 있습니다. 자세한 내용은 <a href="https://github.com/expressjs/multer" target="_blank" rel="external">링크</a>에서 확인해 보실 수 있습니다.</p>
</div><div class="article__tags"><a href="/tags/nodejs/" class="article__tags__item">nodejs</a><a href="/tags/javascript/" class="article__tags__item">javascript</a><a href="/tags/javascript-server/" class="article__tags__item">javascript server</a><a href="/tags/server/" class="article__tags__item">server</a><a href="/tags/express/" class="article__tags__item">express</a><a href="/tags/body-parser/" class="article__tags__item">body-parser</a><a href="/tags/bodyParser/" class="article__tags__item">bodyParser</a><a href="/tags/multer/" class="article__tags__item">multer</a><a href="/tags/form-submit/" class="article__tags__item">form submit</a></div><div itemscope itemprop="author" itemtype="https://schema.org/Person" class="article__author"><img src="/images/avatar.jpg" alt="keunhyeok jeon" class="article__author__image"><a title="About keunhyeok jeon" rel="author" class="article__author__link">keunhyeok jeon</a><p class="article__author__desc"></p><div class="article__author__socials"><a href="https://github.com/hyc7575" title="github" target="_blank" class="article__author__socials__item"><i class="fa fa-github"></i></a><a href="/atom.xml" title="rss" target="_blank" class="article__author__socials__item"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="keunhyeok jeon"></div><div id="sharer" class="sharer"><div class="sharer-inner"><div class="sharer__right"><button id="sharer-facebook" class="sharer__item"><i class="fa fa-facebook-official"></i></button><button id="sharer-twitter" class="sharer__item"><i class="fa fa-twitter"></i></button><button id="sharer-pinterest" class="sharer__item"><i class="fa fa-pinterest"></i></button><button id="sharer-pocket" class="sharer__item"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//hyc7575.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2017-11-26T11:33:07.552Z"><meta itemprop="articleBody" content="Node.js에서 form양식을 submit을 하기위해 사용되는 body-parser와 multer 미들웨어에 대해서 간단하게 알아보려 합니다. 각 미들웨어의 용도를 짧게 소개하면 body-parser는 라우터와 미들웨어 예제때 언급하였듯 요청 바디를 파싱하여서 req.body 객체로 접근할 수 있도록 도와주고, multer는 파일을 업로드를..."><meta itemprop="url" content="http://hyc7575.github.io/2017/05/24/2017-05-24-node-js-bodyparserAndMulter/"><meta itemprop="mainEntityOfPage" content="http://hyc7575.github.io/2017/05/24/2017-05-24-node-js-bodyparserAndMulter/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="hyc7575 blog"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://hyc7575.github.io/images/logo.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="http://hyc7575.github.iohttps://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png"><meta itemprop="url" content="http://hyc7575.github.iohttps://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png"><meta itemprop="width"><meta itemprop="height"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a href="/2017/06/02/2017-06-02-Nodejs-session-with-login2/" class="related-posts__item"><div style="background-image: url('https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png')" class="related-posts__item__background"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Node.js(express) - express-session 로그인(2/3)</span></a></div><div class="related-posts__item__wrapper"><a href="/2017/05/16/2017-05-16-nodejs-express-router-middleware/" class="related-posts__item"><div style="background-image: url('https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png')" class="related-posts__item__background"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Node.js(express) - Router와 middleware</span></a></div><div class="related-posts__item__wrapper"><a href="/2017/05/18/2017-05-18-express-ejs/" class="related-posts__item"><div style="background-image: url('https://cloud.githubusercontent.com/assets/14171723/25853095/7bf3be3a-3506-11e7-8421-0a2287dd6278.png')" class="related-posts__item__background"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Node.js(express) - express ejs 템플릿</span></a></div></section></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Tag cloud</h3><div class="tag-cloud"><a href="/tags/LifeCycle/" style="font-size: 0.75rem;">LifeCycle</a> <a href="/tags/React/" style="font-size: 0.75rem;">React</a> <a href="/tags/Router/" style="font-size: 0.75rem;">Router</a> <a href="/tags/array/" style="font-size: 0.75rem;">array</a> <a href="/tags/bcrypt/" style="font-size: 0.75rem;">bcrypt</a> <a href="/tags/body-parser/" style="font-size: 0.75rem;">body-parser</a> <a href="/tags/bodyParser/" style="font-size: 0.75rem;">bodyParser</a> <a href="/tags/cookie-parser/" style="font-size: 0.75rem;">cookie-parser</a> <a href="/tags/css/" style="font-size: 0.75rem;">css</a> <a href="/tags/custom-radio/" style="font-size: 0.75rem;">custom radio</a> <a href="/tags/data-bind/" style="font-size: 0.75rem;">data bind</a> <a href="/tags/directive/" style="font-size: 1rem;">directive</a> <a href="/tags/ejs/" style="font-size: 0.75rem;">ejs</a> <a href="/tags/ejs-layout/" style="font-size: 0.75rem;">ejs-layout</a> <a href="/tags/express/" style="font-size: 1.25rem;">express</a> <a href="/tags/express-session/" style="font-size: 0.88rem;">express-session</a> <a href="/tags/form-submit/" style="font-size: 0.75rem;">form submit</a> <a href="/tags/geolocation/" style="font-size: 0.75rem;">geolocation</a> <a href="/tags/google-map-api/" style="font-size: 0.75rem;">google map api</a> <a href="/tags/html/" style="font-size: 0.75rem;">html</a> <a href="/tags/html5-geolocation/" style="font-size: 0.75rem;">html5 geolocation</a> <a href="/tags/input-radio/" style="font-size: 0.75rem;">input radio</a> <a href="/tags/javascript/" style="font-size: 1.5rem;">javascript</a> <a href="/tags/javascript-array/" style="font-size: 0.75rem;">javascript array</a> <a href="/tags/javascript-server/" style="font-size: 1.38rem;">javascript server</a> <a href="/tags/layout/" style="font-size: 0.75rem;">layout</a> <a href="/tags/middleware/" style="font-size: 0.75rem;">middleware</a> <a href="/tags/multer/" style="font-size: 0.75rem;">multer</a> <a href="/tags/mysql/" style="font-size: 0.75rem;">mysql</a> <a href="/tags/nodejs/" style="font-size: 1.38rem;">nodejs</a> <a href="/tags/nodejs-login/" style="font-size: 0.88rem;">nodejs login</a> <a href="/tags/route/" style="font-size: 0.75rem;">route</a> <a href="/tags/router/" style="font-size: 0.75rem;">router</a> <a href="/tags/server/" style="font-size: 1.38rem;">server</a> <a href="/tags/vue/" style="font-size: 1.13rem;">vue</a> <a href="/tags/vue-js/" style="font-size: 1.13rem;">vue js</a> <a href="/tags/weather-api/" style="font-size: 0.75rem;">weather api</a> <a href="/tags/디렉티브/" style="font-size: 1rem;">디렉티브</a> <a href="/tags/라이프사이클/" style="font-size: 0.75rem;">라이프사이클</a> <a href="/tags/생명주기/" style="font-size: 0.75rem;">생명주기</a> <a href="/tags/암호화/" style="font-size: 0.75rem;">암호화</a> <a href="/tags/지시자/" style="font-size: 1rem;">지시자</a></div></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">11월 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">9월 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">8월 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">7월 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">6월 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">5월 2017</a><span class="archive-list-count">10</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/vue/">vue</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/잡담/">잡담</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html/css</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>© 2017 keunhyeok jeon<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>